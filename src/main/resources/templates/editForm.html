<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adminty - Premium Admin Template by Colorlib</title>
<link rel="icon" th:href="@{/files/assets/images/favicon.ico}"
	type="image/x-icon">

<link
	th:href="@{https://fonts.googleapis.com/css?family=Open+Sans:400,600,800}"
	rel="stylesheet">
<link rel="stylesheet"
	th:href="@{/files/bower_components/bootstrap/dist/css/bootstrap.min.css}">
<link rel="stylesheet"
	th:href="@{/files/bower_components/datatables.net-bs4/css/dataTables.bootstrap4.min.css}">
<link rel="stylesheet"
	th:href="@{/files/bower_components/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css}">
<link th:href="@{/files/assets/pages/jquery.filer/css/jquery.filer.css}"
	rel="stylesheet" />
<link
	th:href="@{/files/assets/pages/jquery.filer/css/themes/jquery.filer-dragdropbox-theme.css}"
	rel="stylesheet" />
<link rel="stylesheet" th:href="@{/files/assets/css/component.css}">
<link rel="stylesheet"
	th:href="@{/files/assets/icon/themify-icons/themify-icons.css}">
<link rel="stylesheet"
	th:href="@{/files/assets/icon/icofont/css/icofont.css}">
<link rel="stylesheet"
	th:href="@{/files/assets/icon/feather/css/feather.css}">
<link rel="stylesheet" th:href="@{/files/assets/css/style.css}">
<link rel="stylesheet"
	th:href="@{/files/assets/css/jquery.mCustomScrollbar.css}">
</head>
<body>

	<div class="theme-loader">
		<div class="ball-scale">
			<div class="contain">
				<div class="ring">
					<div class="frame"></div>
				</div>
			</div>
		</div>
	</div>

	<div id="pcoded" class="pcoded">
		<div class="pcoded-overlay-box"></div>
		<div class="pcoded-container navbar-wrapper">
			<div th:replace="header :: header"></div>
			<div class="pcoded-main-container">
				<div class="pcoded-wrapper">
					<div th:replace="side :: sidebar"></div>
					<div class="pcoded-content">
						<div class="pcoded-inner-content">

							<div class="main-body">
								<div class="page-wrapper">

									<div class="page-header">
										<div class="row align-items-end">
											<div class="col-lg-8">
												<div class="page-header-title">
													<div class="d-inline">
														<h4>FormData edit List</h4>
													</div>
												</div>
											</div>
											<div class="col-lg-4">
												<div class="page-header-breadcrumb">
													<ul class="breadcrumb-title">
														<li class="breadcrumb-item" style="float: left;"><a
															href="../admin/home"> <i class="feather icon-home"></i>
														</a></li>
														<li class="breadcrumb-item" style="float: left;"><a
															href="#!">E-Commerce</a></li>
														<li class="breadcrumb-item" style="float: left;"><a
															href="#!">FormData edit List</a></li>
													</ul>
												</div>
											</div>
										</div>
									</div>

									<div class="container">
										<h2>Edit Form Data</h2>

										<form id="updateForm">

											<input type="hidden" id="updateId" name="id"
												th:value="${formData.id}" />

											<div class="form-group">
												<label for="editCategorySelect">Category:</label> <select
													id="editCategorySelect" name="category"
													class="form-control">
													<option value="">Select Category</option>
													<option th:each="category : ${categories}"
														th:value="${category.id}" th:text="${category.name}"
														th:selected="${category.id == formData.category}"></option>
												</select>
											</div>

											<div class="form-group">
												<label for="editSubcategorySelect">Subcategory:</label> <select
													id="editSubcategorySelect" name="subcategory"
													class="form-control">
													<option value="">Select Subcategory</option>
													<option th:each="subcategory : ${subcategoryList}"
														th:value="${subcategory.id}" th:text="${subcategory.name}"
														th:selected="${subcategory.id == formData.subcategory}"></option>
												</select>
											</div>

											<div class="form-group">
												<label>Selected Entities:</label>
												<div class="checkbox-group">
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Brand"
															th:checked="${formData.checkedBoxes.contains('Brand')}"
															class="form-check-input"> <label
															class="form-check-label">Brand</label>
													</div>

													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Model"
															th:checked="${formData.checkedBoxes.contains('Brand')}"
															class="form-check-input"> <label
															class="form-check-label">Model</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Transmission"
															th:checked="${formData.checkedBoxes.contains('Transmission')}"
															class="form-check-input"> <label
															class="form-check-label">Transmission</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Fuel"
															th:checked="${formData.checkedBoxes.contains('Fuel')}"
															class="form-check-input"> <label
															class="form-check-label">Fuel</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('Variant')}"
															class="form-check-input"> <label
															class="form-check-label">Variant</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('Accessories')}"
															class="form-check-input"> <label
															class="form-check-label">Accessories</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('ContructionStatus')}"
															class="form-check-input"> <label
															class="form-check-label">ContructionStatus</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('	EducationalType')}"
															class="form-check-input"> <label
															class="form-check-label"> EducationalType</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('Facing')}"
															class="form-check-input"> <label
															class="form-check-label">Facing</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('Furnshing')}"
															class="form-check-input"> <label
															class="form-check-label">Furnshing</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('ListedBy')}"
															class="form-check-input"> <label
															class="form-check-label">ListedBy</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('Position')}"
															class="form-check-input"> <label
															class="form-check-label">Position</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('Property')}"
															class="form-check-input"> <label
															class="form-check-label">Property</label>
													</div>
													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('	SalaryPeriod')}"
															class="form-check-input"> <label
															class="form-check-label"> SalaryPeriod</label>
													</div>

													<div class="form-check">
														<input type="checkbox" name="selectedEntities[]"
															value="Variant"
															th:checked="${formData.checkedBoxes.contains('Vehicles')}"
															class="form-check-input"> <label
															class="form-check-label"> Vehicles</label>
													</div>
												</div>
											</div>


											<div class="text-center">
												<button type="submit" onclick="updateForm(event)"
													class="btn btn-primary waves-effect m-r-20 f-w-600 d-inline-block save_btn">Save</button>
												<button type="button"
													class="btn btn-primary waves-effect m-r-20 f-w-600 md-close d-inline-block close_btn"
													onclick="window.location.href='/admin/Formdata'">Cancel</button>
											</div>
										</form>



									</div>

								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script th:src="@{/files/bower_components/jquery/dist/jquery.min.js}"></script>
	<script th:src="@{/files/bower_components/jquery-ui/jquery-ui.min.js}"></script>
	<script
		th:src="@{/files/bower_components/popper.js/dist/umd/popper.min.js}"></script>
	<script
		th:src="@{/files/bower_components/bootstrap/dist/js/bootstrap.min.js}"></script>
	<script
		th:src="@{/files/bower_components/jquery-slimscroll/jquery.slimscroll.js}"></script>
	<script th:src="@{/files/bower_components/modernizr/modernizr.js}"></script>
	<script
		th:src="@{/files/bower_components/modernizr/feature-detects/css-scrollbars.js}"></script>
	<script
		th:src="@{/files/bower_components/datatables.net/js/jquery.dataTables.min.js}"></script>
	<script
		th:src="@{/files/assets/pages/data-table/js/dataTables.bootstrap4.min.js}"></script>
	<script
		th:src="@{/files/bower_components/datatables.net-responsive/js/dataTables.responsive.min.js}"></script>
	<script
		th:src="@{/files/bower_components/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js}"></script>
	<script
		th:src="@{/files/assets/pages/jquery.filer/js/jquery.filer.min.js}"></script>
	<script th:src="@{/files/assets/pages/filer/custom-filer.js}"></script>
	<script
		th:src="@{/files/assets/pages/filer/jquery.fileuploads.init.js}"></script>
	<script th:src="@{/files/assets/js/classie.js}"></script>
	<script th:src="@{/files/assets/js/modalEffects.js}"></script>
	<script th:src="@{/files/assets/pages/product-list/product-list.js}"></script>
	<script th:src="@{/files/bower_components/i18next/i18next.min.js}"></script>
	<script
		th:src="@{/files/bower_components/i18next-xhr-backend/i18nextXHRBackend.min.js}"></script>
	<script
		th:src="@{/files/bower_components/i18next-browser-languagedetector/i18nextBrowserLanguageDetector.min.js}"></script>
	<script
		th:src="@{/files/bower_components/jquery-i18next/jquery-i18next.min.js}"></script>
	<script th:src="@{/files/assets/js/pcoded.min.js}"></script>
	<script th:src="@{/files/assets/js/vartical-layout.min.js}"></script>
	<script
		th:src="@{/files/assets/js/jquery.mCustomScrollbar.concat.min.js}"></script>
	<script th:src="@{/files/assets/js/script.js}"></script>


	<script th:inline="javascript">
	function updateForm(event) {
		event.preventDefault();

		var formData = {
			id : parseInt(document.getElementById("updateId").value),
			category : parseInt(document
					.getElementById("editCategorySelect").value),
			subcategory : parseInt(document
					.getElementById("editSubcategorySelect").value),
			checkedBoxes : Array
					.from(
							document
									.querySelectorAll('input[type=checkbox]:checked'))
					.map(function(checkbox) {
						return checkbox.value;
					}).join(',')
		};

		$.ajax({
			url : '/admin/Formdata/update',
			type : 'POST',
			contentType : 'application/json',
			data : JSON.stringify(formData),
			success : function(data, textStatus, xhr) {
				if (xhr.status === 201) {
					console.log('Form updated successfully');

					window.location.href = '/admin/Formdata';
				} else {
					console.error('Form update failed');

				}
			},
			error : function(xhr, textStatus, errorThrown) {
				console.error('Error updating form:', errorThrown);
			}
		});
	}
</script>



</body>
</html>
