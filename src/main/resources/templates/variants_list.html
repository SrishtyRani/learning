<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<title>Adminty - Premium Admin Template by Colorlib</title>


<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="#">
<meta name="keywords"
	content="Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
<meta name="author" content="#">

<link rel="icon" href="../files/assets/images/favicon.ico"
	type="image/x-icon">

<link
	href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800"
	rel="stylesheet">

<link rel="stylesheet" type="text/css"
	th:href="@{../files/bower_components/bootstrap/dist/css/bootstrap.min.css}">

<link rel="stylesheet" type="text/css"
	th:href="@{../files/bower_components/datatables.net-bs4/css/dataTables.bootstrap4.min.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{../files/bower_components/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css}">

<link
	th:href="@{../files/assets/pages/jquery.filer/css/jquery.filer.css}"
	type="text/css" rel="stylesheet" />
<link
	th:href="@{../files/assets/pages/jquery.filer/css/themes/jquery.filer-dragdropbox-theme.css}"
	type="text/css" rel="stylesheet" />

<link rel="stylesheet" type="text/css"
	th:href="@{../files/assets/css/component.css}">

<link rel="stylesheet" type="text/css"
	th:href="@{../files/assets/icon/themify-icons/themify-icons.css}">

<link rel="stylesheet" type="text/css"
	th:href="@{../files/assets/icon/icofont/css/icofont.css}">

<link rel="stylesheet" type="text/css"
	th:href="@{../files/assets/icon/feather/css/feather.css}">

<link rel="stylesheet" type="text/css"
	th:href="@{../files/assets/css/style.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{../files/assets/css/jquery.mCustomScrollbar.css}">
</head>

<body>

	<div class="theme-loader">
		<div class="ball-scale">
			<div class="contain">
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
				<div class="ring">
					<div class="frame"></div>
				</div>
			</div>
		</div>
	</div>

	<div id="pcoded" class="pcoded">
		<div class="pcoded-overlay-box"></div>
		<div class="pcoded-container navbar-wrapper">
			<div th:replace="~{header :: header}"></div>
			<div class="pcoded-main-container">
				<div class="pcoded-wrapper">
					<div th:replace="~{side :: sidebar}"></div>
					<div class="pcoded-content">
						<div class="pcoded-inner-content">

							<div class="main-body">
								<div class="page-wrapper">

									<div class="page-header">
										<div class="row align-items-end">
											<div class="col-lg-8">
												<div class="page-header-title">
													<div class="d-inline">
														<h4>Variant List</h4>
													</div>
												</div>
											</div>
											<div class="col-lg-4">
												<div class="page-header-breadcrumb">
													<ul class="breadcrumb-title">
														<li class="breadcrumb-item" style="float: left;"><a
															href="../admin/home"> <i class="feather icon-home"></i>
														</a></li>
														<li class="breadcrumb-item" style="float: left;"><a
															href="#!">E-Commerce</a></li>
														<li class="breadcrumb-item" style="float: left;"><a
															href="#!">Variant List</a></li>
													</ul>
												</div>
											</div>
										</div>
									</div>


									<div class="page-body">
										<div class="row">
											<div class="col-sm-12">

												<div class="card">
													<div class="card-header">
														<h5>Variant List</h5>
														<button type="button"
															class="btn btn-primary waves-effect waves-light f-right d-inline-block md-trigger"
															data-modal="modal-13">
															<i class="icofont icofont-plus m-r-5"></i> Add Variant
														</button>

														<button id="deleteSelectedBtn" class="btn btn-danger"
															onclick="deleteAll()">Delete</button>
														<button id="activateSelectedBtn" class="btn btn-success"
															onclick="activateSelected()">Active</button>
														<button id="deactivateSelectedBtn" class="btn btn-warning"
															onclick="deactivateSelected()">Block</button>
													</div>
													<div class="card-block">
														<div class="table-responsive">
															<div class="table-content">
																<div class="project-table">
																	<table id="e-product-list" class="table  ">
																		<thead>
																			<tr>
																				<td><input type="checkbox"
																					onchange="checkAll(this)" id="selectAllCheckbox"></td>
																				<th>Variant</th>
																				<th>ModelName</th>

																				<th>Active</th>
																				<th>Action</th>
																			</tr>
																		</thead>
																		<tbody>
																			<tr th:each="variant : ${variants}">
																				<td><input type="checkbox"
																					class="category-checkbox"
																					th:data-id="${variant.id}"
																					th:value="'row-' + ${variant.id}"
																					name="selectedIds[]"></td>

																				<td th:text="${variant.name}"></td>

																				<td
																					th:text="${variant.parentBrandModel != null ? variant.parentBrandModel.name : ''}"></td>

																				<td><span th:if="${variant.active}"
																					class="label label-success">Active</span> <span
																					th:if="${not variant.active}"
																					class="label label-danger">Block</span></td>

																				<td style="white-space: nowrap"><a
																					class="btn btn-primary btm-sm"
																					th:href="@{'/admin/variants/' + ${variant.id} + '/edit'}">Edit</a>
																					<a class="btn btn-danger btm-sm"
																					th:href="@{'/admin/variants/' + ${variant.id} + '/delete'}">Delete</a>
																				</td>
																			</tr>
																		</tbody>


																	</table>
																</div>
															</div>

														</div>
													</div>
												</div>

											</div>
										</div>
										<form method="post" action="/admin/variants">
											<div class="md-modal md-effect-13 addcontact" id="modal-13">
												<div class="md-content">
													<h3 class="f-26">Add Variant</h3>
													<div>
														<div class="input-group">
															<div class="input-group-append">
																<span class="input-group-text"><i
																	class="icofont icofont-user"></i></span>
															</div>
															<input type="text" class="form-control name"
																placeholder="Name" name="name">
														</div>

														<div>
															<select id="parentBrandModel" class="form-control"
																name="parentBrandModelId">
																<option value="">Select Parent Brand Model</option>
																<th:block th:each="brandModel : ${brandModels}">
																	<option th:value="${brandModel.id}"
																		th:text="${brandModel.name}"></option>
																</th:block>
															</select>
														</div>
													</div>
													<div class="input-group">
														<span class="label label-primary"
															style="font-size: larger; font-weight: bold;">Active:</span>
														<input type="checkbox" id="activeCheckbox" name="active"
															value="true">
													</div>
													<div class="text-center">
														<button type="submit"
															class="btn btn-primary waves-effect m-r-20 f-w-600 d-inline-block save_btn">Save</button>
														<button type="button"
															class="btn btn-primary waves-effect m-r-20 f-w-600 md-close d-inline-block close_btn">Close</button>
													</div>
												</div>
											</div>

											<div class="md-overlay"></div>
										</form>
									</div>
								</div>

							</div>

						</div>
					</div>

					<div id="styleSelector"></div>
				</div>
			</div>
		</div>
	</div>
	</div>

	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script type="text/javascript"
		src="../files/bower_components/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript"
		src="../files/bower_components/jquery-ui/jquery-ui.min.js"></script>
	<script type="text/javascript"
		src="../files/bower_components/popper.js/dist/umd/popper.min.js"></script>
	<script type="text/javascript"
		src="../files/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

	<script type="text/javascript"
		src="../files/bower_components/jquery-slimscroll/jquery.slimscroll.js"></script>

	<script type="text/javascript"
		src="../files/bower_components/modernizr/modernizr.js"></script>
	<script type="text/javascript"
		src="../files/bower_components/modernizr/feature-detects/css-scrollbars.js"></script>

	<script
		src="../files/bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
	<script
		src="../files/assets/pages/data-table/js/dataTables.bootstrap4.min.js"></script>
	<script
		src="../files/bower_components/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
	<script
		src="../files/bower_components/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>

	<script src="../files/assets/pages/jquery.filer/js/jquery.filer.min.js"></script>
	<script src="../files/assets/pages/filer/custom-filer.js"
		type="text/javascript"></script>
	<script src="../files/assets/pages/filer/jquery.fileuploads.init.js"
		type="text/javascript"></script>

	<script src="../files/assets/js/classie.js"></script>
	<script src="../files/assets/js/modalEffects.js"></script>

	<script type="text/javascript"
		src="../files/assets/pages/product-list/product-list.js"></script>

	<script type="text/javascript"
		src="../files/bower_components/i18next/i18next.min.js"></script>

	<script type="text/javascript"
		src="../files/bower_components/i18next-xhr-backend/i18nextXHRBackend.min.js"></script>
	<script type="text/javascript"
		src="../files/bower_components/i18next-browser-languagedetector/i18nextBrowserLanguageDetector.min.js"></script>
	<script type="text/javascript"
		src="../files/bower_components/jquery-i18next/jquery-i18next.min.js"></script>
	<script src="../files/assets/js/pcoded.min.js"></script>
	<script src="../files/assets/js/vartical-layout.min.js"></script>
	<script src="../files/assets/js/jquery.mCustomScrollbar.concat.min.js"></script>

	<script type="text/javascript" src="../files/assets/js/script.js"></script>
	<script th:inline="javascript">
		function checkAll(bx) {
			var cbs = document.querySelectorAll(".category-checkbox");
			for (var i = 0; i < cbs.length; i++) {
				cbs[i].checked = bx.checked;
			}
		}

		function deleteAll() {
			let selectedIds = [];
			$(".category-checkbox:checked").each(function() {
				console.log($(this).data("id"));
				let id = $(this).data("id");
				selectedIds.push(id);
			});
			console.log(selectedIds)
			$.ajax({
				url : "/admin/variants/deleteSelected",
				type : "GET",
				traditional : true,
				data : {
					selectedIds : selectedIds
				},
				success : function(response) {
					console.log("Deletion successful:");
					location.reload();
				},
				error : function(xhr, status, error) {
					console.error("Error occurred during deletion:", error);
				}
			});
		}

		$(document)
				.on(
						"click",
						".delete-btn",
						function() {
							var selectedId = $(this).data("id");
							var confirmed = confirm("Are you sure you want to delete this category?");
							if (confirmed) {
								deleteSelectedsubCategories([ selectedIds ]);
							}
						});

		function activateSelected() {
			let selectedIds = [];
			$(".category-checkbox:checked").each(function() {
				console.log($(this).data("id"));
				selectedIds.push($(this).data("id"));
			});

			$.ajax({
				url : "/admin/variants/activate",
				type : "POST",
				contentType : "application/json",
				data : JSON.stringify(selectedIds),
				success : function(response) {
					console.log("Activation successful:");
					location.reload();
				},
				error : function(xhr, status, error) {
					console.error("Error occurred during activation:", error);
				}
			});
		}

		function deactivateSelected() {
			let selectedIds = [];
			$(".category-checkbox:checked").each(function() {
				console.log($(this).data("id"));
				selectedIds.push($(this).data("id"));
			});

			$
					.ajax({
						url : "/admin/variants/deactivateSelected",
						type : "POST",
						contentType : "application/json",
						data : JSON.stringify(selectedIds),
						success : function(response) {
							location.reload();
						},
						error : function(xhr, status, error) {
							console.error(
									"Error occurred during deactivation:",
									error);
						}
					});
		}
	</script>
</body>



</html>